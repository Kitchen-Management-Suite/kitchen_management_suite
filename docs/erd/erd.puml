' Created-By: Rohan Plante, Thomas Bruce
@startuml
@startchen
left to right direction

entity User {
    User ID <<key>>
    First Name
    Last Name
    Username
    Email
    Date of Birth
    Password
}

entity UserProfile {
    Profile ID <<key>>
    User ID <<FK>>
    Height
    Weight
    Calorie Goal
    Dietary Preferences
    Allergies
}

entity UserNutrition {
    ' UserNutrition: stores calorie and macronutrient data per user.
    ' Allows daily tracking/logging and dietary goal management.
    Nutrition ID <<key>>
    User ID <<FK>>
    Date
    Time
    Calories Consumed
    Protein
    Carbs
    Fat
    Fiber
    Sugar
    Sodium
}

entity FoodLog{
    'FoodLog: Stores log of all meals eaten per day'
    Log ID <<key>>
    Nutrition ID <<FK>>
    Name 
    MacroNutrients
    Barcode 
    Picture
}

entity Role {
    Role ID <<key>>
    Role Name
}

entity Household {
    Household ID <<key>>
    Household Name
}

entity Pantry {
    Pantry ID <<key>>
    Pantry Name
}

entity Item {
    Item ID <<key>>
    Item Name
    Item Body
    Source
    ' e.g., "openfoodfacts", "custom"
    IsGlobal
    ' boolean: true if from Open Food Facts
}

entity Recipe {
    Recipe ID <<key>>
    Recipe Name
    Recipe Body
    Source
    ' e.g., "fathub", "custom"
    IsGlobal
    ' boolean: true if from Fathub dataset
}

' Associative  Entities
' Member: connects Users and Households with Roles
entity Member {
    Member ID <<key>>
    User ID <<FK>>
    Household ID <<FK>>
    Role ID <<FK>>
}

' Adds: connects User, Item, and Pantry
' Tracks who added what to where and when.
entity Adds {
    Adds ID <<key>>
    User ID <<FK>>
    Pantry ID <<FK>>
    Item ID <<FK>>
    Quantity
    Item In Date
}

' Authors: Connects User, Household, and Recipe.
' Tracks which User (added/created) a Recipe in which Household.
entity Authors {
    Authors ID <<key>>
    User ID <<FK>>
    Household ID <<FK>>
    Recipe ID <<FK>>
    Date Added
    IsCustom
    ' boolean: true if recipe is custom to this household/user
}

' Holds: connects Households with Recipes they use or save.
entity Holds {
    Holds ID <<key>>
    Household ID <<FK>>
    Recipe ID <<FK>>
}

' Relationships
' User <-> UserProfile
' Each User has exactly one Profile
User -1- UserProfile

' User <-> UserNutrition
' Each User can have multiple Nutrition records/logs
User -M- UserNutrition

' User <-> Member <-> Household
' A User can belong to many Households
' A Household can have many Users.
User -N- Member
Member -M- Household

' Member <-> Role
' Each Member has exactly one Role (Admin, Member, Guest)
Member -1- Role

' Household <-> Pantry
' Each Household owns exactly one Pantry.
Household -1- Pantry

' User <-> Adds <-> Item & Pantry
' A User can add many Items to a Pantry.
' Each Adds record links one User, one Pantry, and one Item.
User -M- Adds
Adds -N- Item
Adds -1- Pantry

' User <-> Household <-> Recipe
' A User can author many Recipes within a specific Household.
' A Recipe can be authored in multiple Households by different Users.
User -M- Authors
Household -M- Authors
Recipe -N- Authors

' Household <-> Holds <-> Recipe
' A Household can hold (save/use) multiple Recipes.
' Recipes can appear in multiple Households.
Household -M- Holds
Holds -N- Recipe

UserNutrition -1- FoodLog

@endchen
@enduml
